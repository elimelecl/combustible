<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Ventas de Combustible</title>
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #2980b9;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #c0392b;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark);
        }
        
        .container {
            max-width: 100%;
            padding: 0 15px;
            margin: 0 auto;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-size: 24px;
            text-align: center;
        }
        
        nav {
            background-color: var(--secondary);
            padding: 10px 0;
        }
        
        nav .tabs {
            display: flex;
            justify-content: space-around;
        }
        
        nav .tab {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            padding: 8px 12px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        nav .tab.active {
            background-color: rgba(255,255,255,0.2);
        }
        
        .content {
            padding: 20px 0;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--secondary);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #219653;
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #a33;
        }
        
        .btn-link {
            background: none;
            color: var(--secondary);
            text-decoration: underline;
            padding: 0;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-10 {
            margin-bottom: 10px;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        table th {
            background-color: var(--light);
        }
        
        .hidden {
            display: none;
        }
        
        #newClientForm {
            display: none;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Estilos para tablets */
        @media (min-width: 768px) {
            .container {
                padding: 0 30px;
            }
            
            .form-row {
                display: flex;
                gap: 15px;
            }
            
            .form-row .form-group {
                flex: 1;
            }
            
            header h1 {
                font-size: 28px;
            }
        }
        
        /* Estilos para pantallas más grandes */
        @media (min-width: 992px) {
            .container {
                max-width: 960px;
            }
        }
        
        /* Animaciones y efectos visuales */
        .fade-in {
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Sistema de Ventas de Combustible</h1>
        </div>
    </header>
    
    <nav>
        <div class="container">
            <div class="tabs">
                <a href="#" class="tab active" data-tab="sales">Venta</a>
                <a href="#" class="tab" data-tab="clients">Clientes</a>
                <a href="#" class="tab" data-tab="reports">Reportes</a>
                <a href="#" class="tab" data-tab="logout">Salir</a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div id="alert-container"></div>
        
        <!-- Sección de Ventas -->
        <div id="sales-tab" class="content fade-in">
            <div class="card">
                <h2 class="mb-20">Registrar Nueva Venta</h2>
                
                <form id="salesForm">
                    <div class="form-group">
                        <label for="clientId">Número de Cédula/ID:</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="clientId" placeholder="Ingrese el número de identificación" required>
                            <button type="button" id="searchClient" style="width: auto;">Buscar</button>
                        </div>
                    </div>
                    
                    <div id="clientInfo" class="mb-20 hidden">
                        <div class="alert alert-success">
                            Cliente: <span id="clientName">-</span><br>
                            Tipo: <span id="clientType">-</span>
                        </div>
                    </div>
                    
                    <div id="clientNotFound" class="hidden">
                        <div class="alert alert-warning mb-20">
                            Cliente no encontrado. Por favor registre el nuevo cliente.
                        </div>
                        <button type="button" id="showRegisterClient" class="btn-warning mb-20">Registrar Nuevo Cliente</button>
                    </div>
                    
                    <div id="newClientForm">
                        <h3 class="mb-10">Registro Rápido de Cliente</h3>
                        <div class="form-group">
                            <label for="newClientName">Nombre completo:</label>
                            <input type="text" id="newClientName" placeholder="Nombre del cliente" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newClientType">Tipo de cliente:</label>
                                <select id="newClientType">
                                    <option value="Persona">Persona</option>
                                    <option value="Vehículo">Vehículo</option>
                                    <option value="Remolcador">Remolcador</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="newClientPhone">Teléfono (opcional):</label>
                                <input type="tel" id="newClientPhone" placeholder="Número de contacto">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <button type="button" id="registerNewClient" class="btn-success">Guardar Cliente</button>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fuelType">Tipo de Combustible:</label>
                            <select id="fuelType" required>
                                <option value="">Seleccione tipo</option>
                                <option value="ACPM">ACPM</option>
                                <option value="Gasolina Corriente">Gasolina Corriente</option>
                                <option value="Gasolina Extra">Gasolina Extra</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="quantity">Cantidad (galones):</label>
                            <input type="number" id="quantity" step="0.01" min="0.01" placeholder="0.00" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="unitPrice">Precio por Galón:</label>
                            <input type="number" id="unitPrice" step="0.01" min="0.01" placeholder="0.00" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="totalPrice">Precio Total:</label>
                            <input type="number" id="totalPrice" readonly>
                        </div>
                    </div>
                    
                    <div class="text-center mt-20">
                        <button type="submit" class="btn-success btn-block pulse">Completar Venta</button>
                    </div>
                </form>
            </div>
            
            <div class="card">
                <h3 class="mb-20">Últimas 5 Ventas</h3>
                <div class="table-container">
                    <table id="recentSales">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>Tipo</th>
                                <th>Cantidad</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Se llenará con JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Sección de Clientes -->
        <div id="clients-tab" class="content hidden fade-in">
            <div class="card">
                <h2 class="mb-20">Gestión de Clientes</h2>
                
                <div class="form-group">
                    <input type="text" id="clientSearch" placeholder="Buscar por nombre o cédula...">
                </div>
                
                <div class="table-container">
                    <table id="clientsTable">
                        <thead>
                            <tr>
                                <th>Cédula/ID</th>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Teléfono</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Se llenará con JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div class="text-center mt-20">
                    <button id="addNewClient" class="btn-primary">Agregar Nuevo Cliente</button>
                </div>
            </div>
        </div>
        
        <!-- Sección de Reportes -->
        <div id="reports-tab" class="content hidden fade-in">
            <div class="card">
                <h2 class="mb-20">Reportes de Ventas</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="reportStartDate">Fecha Inicio:</label>
                        <input type="date" id="reportStartDate">
                    </div>
                    
                    <div class="form-group">
                        <label for="reportEndDate">Fecha Fin:</label>
                        <input type="date" id="reportEndDate">
                    </div>
                </div>
                
                <div class="form-group">
                    <button id="generateReport" class="btn-primary">Generar Reporte</button>
                </div>
                
                <div id="reportResults" class="mt-20 hidden">
                    <h3 class="mb-10">Resultados del Reporte</h3>
                    <!-- Aquí se mostrarán los resultados del reporte -->
                </div>
            </div>
        </div>
        
        <!-- Sección de Logout -->
        <div id="logout-tab" class="content hidden fade-in">
            <div class="card text-center">
                <h2 class="mb-20">Cerrar Sesión</h2>
                <p class="mb-20">¿Está seguro que desea salir del sistema?</p>
                <button id="confirmLogout" class="btn-danger">Confirmar Salida</button>
            </div>
        </div>
    </div>
    
    <script>
        // Datos de ejemplo (normalmente estarían en una base de datos)
        let clients = [
            { id: "12345678", name: "Juan Pérez", type: "Persona", phone: "311-222-3333" },
            { id: "87654321", name: "Transportes ABC", type: "Remolcador", phone: "300-111-2222" },
            { id: "56781234", name: "Camiones XYZ", type: "Vehículo", phone: "320-333-4444" }
        ];
        
        let sales = [
            { 
                id: 1, 
                clientId: "12345678", 
                clientName: "Juan Pérez", 
                fuelType: "Gasolina Corriente", 
                quantity: 5, 
                unitPrice: 9000, 
                totalPrice: 45000, 
                date: "2025-04-16 14:30", 
                seller: "Carlos Rodríguez" 
            },
            { 
                id: 2, 
                clientId: "87654321", 
                clientName: "Transportes ABC", 
                fuelType: "ACPM", 
                quantity: 20, 
                unitPrice: 8500, 
                totalPrice: 170000, 
                date: "2025-04-16 10:15", 
                seller: "María López" 
            }
        ];
        
        // Datos de usuario actual (simulación)
        const currentUser = {
            id: 1,
            name: "Carlos Rodríguez",
            role: "Vendedor"
        };
        
        // Función para inicializar
        document.addEventListener('DOMContentLoaded', function() {
            // Navegación entre pestañas
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    
                    // Activar pestaña
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mostrar contenido
                    document.querySelectorAll('.content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(tabId + '-tab').classList.remove('hidden');
                });
            });
            
            // Inicializar tabla de ventas recientes
            updateRecentSalesTable();
            
            // Inicializar tabla de clientes
            updateClientsTable();
            
            // Evento para buscar cliente al registrar venta
            document.getElementById('searchClient').addEventListener('click', searchClient);
            
            // Mostrar formulario de registro de cliente
            document.getElementById('showRegisterClient').addEventListener('click', function() {
                document.getElementById('newClientForm').style.display = 'block';
            });
            
            // Registrar nuevo cliente
            document.getElementById('registerNewClient').addEventListener('click', registerNewClient);
            
            // Calcular precio total automáticamente
            document.getElementById('quantity').addEventListener('input', calculateTotal);
            document.getElementById('unitPrice').addEventListener('input', calculateTotal);
            
            // Manejar envío del formulario de ventas
            document.getElementById('salesForm').addEventListener('submit', function(e) {
                e.preventDefault();
                registerSale();
            });
            
            // Configurar fecha actual para los campos de reporte
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('reportStartDate').value = formattedDate;
            document.getElementById('reportEndDate').value = formattedDate;
            
            // Generar reporte
            document.getElementById('generateReport').addEventListener('click', generateSalesReport);
            
            // Función para cerrar sesión
            document.getElementById('confirmLogout').addEventListener('click', function() {
                showAlert('Sesión cerrada correctamente', 'success');
                // En una aplicación real, aquí se redireccionaría al login
            });
            
            // Buscar en tabla de clientes
            document.getElementById('clientSearch').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filterClientsTable(searchTerm);
            });
            
            // Añadir nuevo cliente desde la sección de clientes
            document.getElementById('addNewClient').addEventListener('click', function() {
                // Aquí iría un modal o redirección a un formulario completo
                alert('Funcionalidad de agregar cliente desde la sección Clientes');
            });
        });
        
        // Buscar cliente por ID
        function searchClient() {
            const clientId = document.getElementById('clientId').value.trim();
            
            if (!clientId) {
                showAlert('Por favor ingrese un número de identificación', 'warning');
                return;
            }
            
            const client = clients.find(c => c.id === clientId);
            
            if (client) {
                // Mostrar información del cliente
                document.getElementById('clientName').textContent = client.name;
                document.getElementById('clientType').textContent = client.type;
                document.getElementById('clientInfo').classList.remove('hidden');
                document.getElementById('clientNotFound').classList.add('hidden');
                document.getElementById('newClientForm').style.display = 'none';
            } else {
                // Mostrar opción para registrar nuevo cliente
                document.getElementById('clientInfo').classList.add('hidden');
                document.getElementById('clientNotFound').classList.remove('hidden');
            }
        }
        
        // Registrar nuevo cliente
        function registerNewClient() {
            const clientId = document.getElementById('clientId').value.trim();
            const clientName = document.getElementById('newClientName').value.trim();
            const clientType = document.getElementById('newClientType').value;
            const clientPhone = document.getElementById('newClientPhone').value.trim();
            
            if (!clientId || !clientName) {
                showAlert('Por favor complete los campos obligatorios', 'warning');
                return;
            }
            
            // Verificar si ya existe
            if (clients.some(c => c.id === clientId)) {
                showAlert('Ya existe un cliente con ese número de identificación', 'warning');
                return;
            }
            
            // Guardar nuevo cliente
            const newClient = {
                id: clientId,
                name: clientName,
                type: clientType,
                phone: clientPhone
            };
            
            clients.push(newClient);
            
            // Actualizar interfaz
            document.getElementById('clientName').textContent = newClient.name;
            document.getElementById('clientType').textContent = newClient.type;
            document.getElementById('clientInfo').classList.remove('hidden');
            document.getElementById('clientNotFound').classList.add('hidden');
            document.getElementById('newClientForm').style.display = 'none';
            
            // Limpiar formulario
            document.getElementById('newClientName').value = '';
            document.getElementById('newClientPhone').value = '';
            
            showAlert('Cliente registrado correctamente', 'success');
            updateClientsTable();
        }
        
        // Calcular precio total
        function calculateTotal() {
            const quantity = parseFloat(document.getElementById('quantity').value) || 0;
            const unitPrice = parseFloat(document.getElementById('unitPrice').value) || 0;
            const totalPrice = quantity * unitPrice;
            
            document.getElementById('totalPrice').value = totalPrice.toFixed(2);
        }
        
        // Registrar venta
        function registerSale() {
            const clientId = document.getElementById('clientId').value.trim();
            const fuelType = document.getElementById('fuelType').value;
            const quantity = parseFloat(document.getElementById('quantity').value);
            const unitPrice = parseFloat(document.getElementById('unitPrice').value);
            const totalPrice = parseFloat(document.getElementById('totalPrice').value);
            
            if (!clientId || !fuelType || isNaN(quantity) || isNaN(unitPrice)) {
                showAlert('Por favor complete todos los campos correctamente', 'warning');
                return;
            }
            
            // Verificar que el cliente exista
            const client = clients.find(c => c.id === clientId);
            if (!client) {
                showAlert('Cliente no registrado. Por favor registre al cliente primero', 'warning');
                return;
            }
            
            // Crear nueva venta
            const now = new Date();
            const dateFormatted = now.toISOString().split('T')[0] + ' ' + 
                                 now.getHours().toString().padStart(2, '0') + ':' + 
                                 now.getMinutes().toString().padStart(2, '0');
            
            const newSale = {
                id: sales.length + 1,
                clientId: clientId,
                clientName: client.name,
                fuelType: fuelType,
                quantity: quantity,
                unitPrice: unitPrice,
                totalPrice: totalPrice,
                date: dateFormatted,
                seller: currentUser.name
            };
            
            sales.unshift(newSale); // Agregar al inicio del array
            
            // Actualizar tabla de ventas recientes
            updateRecentSalesTable();
            
            // Limpiar formulario
            document.getElementById('salesForm').reset();
            document.getElementById('clientInfo').classList.add('hidden');
            
            showAlert('Venta registrada correctamente', 'success');
        }
        
        // Actualizar tabla de ventas recientes
        function updateRecentSalesTable() {
            const tableBody = document.querySelector('#recentSales tbody');
            tableBody.innerHTML = '';
            
            // Mostrar solo las últimas 5 ventas
            const recentSales = sales.slice(0, 5);
            
            if (recentSales.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="5" class="text-center">No hay ventas registradas</td>';
                tableBody.appendChild(row);
                return;
            }
            
            recentSales.forEach(sale => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${sale.date}</td>
                    <td>${sale.clientName}</td>
                    <td>${sale.fuelType}</td>
                    <td>${sale.quantity} gal</td>
                    <td>$${sale.totalPrice.toLocaleString()}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Actualizar tabla de clientes
        function updateClientsTable() {
            const tableBody = document.querySelector('#clientsTable tbody');
            tableBody.innerHTML = '';
            
            if (clients.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="5" class="text-center">No hay clientes registrados</td>';
                tableBody.appendChild(row);
                return;
            }
            
            clients.forEach(client => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${client.id}</td>
                    <td>${client.name}</td>
                    <td>${client.type}</td>
                    <td>${client.phone || '-'}</td>
                    <td>
                        <button class="btn-link edit-client" data-id="${client.id}">Editar</button> | 
                        <button class="btn-link view-history" data-id="${client.id}">Ver Historial</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Agregar eventos a los botones de acción
            document.querySelectorAll('.edit-client').forEach(btn => {
                btn.addEventListener('click', function() {
                    const clientId = this.getAttribute('data-id');
                    // Aquí iría la lógica para editar cliente
                    alert('Editar cliente: ' + clientId);
                });
            });
            
            document.querySelectorAll('.view-history').forEach(btn => {
                btn.addEventListener('click', function() {
                    const clientId = this.getAttribute('data-id');
                    // Aquí iría la lógica para ver historial
                    alert('Ver historial del cliente: ' + clientId);
                });
            });
        }
        
        // Filtrar tabla de clientes
        function filterClientsTable(searchTerm) {
            const rows = document.querySelectorAll('#clientsTable tbody tr');
            
            rows.forEach(row => {
                const id = row.cells[0].textContent.toLowerCase();
                const name = row.cells[1].textContent.toLowerCase();
                
                if (id.includes(searchTerm) || name.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Generar reporte de ventas
        function generateSalesReport() {
            const startDate = document.getElementById('reportStartDate').value;
            const endDate = document.getElementById('reportEndDate').value;
            
            if (!startDate || !endDate) {
                showAlert('Por favor seleccione fechas para el reporte', 'warning');
                return;
            }
            
            // Filtrar ventas por fecha
            const filteredSales = sales.filter(sale => {
                const saleDate = sale.date.split(' ')[0]; // Extraer solo la fecha
                return saleDate >= startDate && saleDate <= endDate;
            });
            
            // Calcular totales
            let totalGallons = 0;
            let totalAmount = 0;
            let fuelTypeCounts = {};
            
            filteredSales.forEach(sale => {
                totalGallons += sale.quantity;
                totalAmount += sale.totalPrice;
                
                if (!fuelTypeCounts[sale.fuelType]) {
                    fuelTypeCounts[sale.fuelType] = {
                        count: 0,
                        gallons: 0,
                        amount: 0
                    };
                }
                
                fuelTypeCounts[sale.fuelType].count++;
                fuelTypeCounts[sale.fuelType].gallons += sale.quantity;
                fuelTypeCounts[sale.fuelType].amount += sale.totalPrice;
            });
            
            // Mostrar resultados
            const reportResults = document.getElementById('reportResults');
            reportResults.classList.remove('hidden');
            
            let summaryHTML = `
                <div class="mb-20">
                    <h4>Resumen del período: ${startDate} a ${endDate}</h4>
                    <p>Total de ventas: ${filteredSales.length}</p>
                    <p>Total de galones: ${totalGallons.toFixed(2)}</p>
                    <p>Monto total: $${totalAmount.toLocaleString()}</p>
                </div>
                
                <h4>Desglose por tipo de combustible:</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Tipo de Combustible</th>
                                <th>Ventas</th>
                                <th>Galones</th>
                                <th>Monto</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            // Añadir filas para cada tipo de combustible
            for (const fuelType in fuelTypeCounts) {
                const data = fuelTypeCounts[fuelType];
                summaryHTML += `
                    <tr>
                        <td>${fuelType}</td>
                        <td>${data.count}</td>
                        <td>${data.gallons.toFixed(2)}</td>
                        <td>$${data.amount.toLocaleString()}</td>
                    </tr>
                `;
            }
            
            summaryHTML += `
                        </tbody>
                    </table>
                </div>
                
                <h4 class="mt-20">Detalle de ventas:</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>Tipo Combustible</th>
                                <th>Cantidad</th>
                                <th>Monto</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            // Añadir filas para cada venta
            filteredSales.forEach(sale => {
                summaryHTML += `
                    <tr>
                        <td>${sale.date}</td>
                        <td>${sale.clientName}</td>
                        <td>${sale.fuelType}</td>
                        <td>${sale.quantity} gal</td>
                        <td>$${sale.totalPrice.toLocaleString()}</td>
                    </tr>
                `;
            });
            
            summaryHTML += `
                        </tbody>
                    </table>
                </div>
                
                <div class="text-center mt-20">
                    <button id="printReport" class="btn-primary">Imprimir Reporte</button>
                    <button id="exportReport" class="btn-secondary" style="margin-left: 10px;">Exportar a Excel</button>
                </div>
            `;
            
            reportResults.innerHTML = summaryHTML;
            
            // Agregar funcionalidad a los botones
            document.getElementById('printReport').addEventListener('click', function() {
                window.print();
            });
            
            document.getElementById('exportReport').addEventListener('click', function() {
                alert('La funcionalidad de exportar a Excel se implementará próximamente');
            });
        }
        
        // Mostrar alertas
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} fade-in`;
            alert.textContent = message;
            
            alertContainer.appendChild(alert);
            
            // Eliminar la alerta después de 3 segundos
            setTimeout(() => {
                alert.classList.add('fade-out');
                setTimeout(() => {
                    alertContainer.removeChild(alert);
                }, 500);
            }, 3000);
        }
        
        // Función para que los empleados puedan cambiar precios (accesible solo para administradores)
        function updateFuelPrices() {
            // Verificar rol de usuario
            if (currentUser.role !== 'Administrador') {
                showAlert('No tiene permisos para actualizar precios', 'warning');
                return;
            }
            
            // Esta función se implementaría completamente en una versión real
            // Aquí solo se muestra un ejemplo simplificado
            const fuelPrices = {
                'ACPM': 8700,
                'Gasolina Corriente': 9200,
                'Gasolina Extra': 12000
            };
            
            let priceUpdateHTML = `
                <div class="card">
                    <h3>Actualizar Precios de Combustible</h3>
                    <form id="priceUpdateForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>ACPM</label>
                                <input type="number" id="priceACPM" value="${fuelPrices['ACPM']}" step="100" min="1000">
                            </div>
                            <div class="form-group">
                                <label>Gasolina Corriente</label>
                                <input type="number" id="priceRegular" value="${fuelPrices['Gasolina Corriente']}" step="100" min="1000">
                            </div>
                            <div class="form-group">
                                <label>Gasolina Extra</label>
                                <input type="number" id="priceExtra" value="${fuelPrices['Gasolina Extra']}" step="100" min="1000">
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Guardar Cambios</button>
                    </form>
                </div>
            `;
            
            // En una implementación real, se insertaría este HTML en la interfaz
            // y se manejarían los eventos del formulario
        }
        
        // Función para realizar cierre de turno (z diario)
        function endOfDayReport() {
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            
            // Filtrar ventas del día actual
            const todaySales = sales.filter(sale => {
                return sale.date.startsWith(formattedDate);
            });
            
            // Cálculos para el reporte
            let totalSales = todaySales.length;
            let totalGallons = 0;
            let totalRevenue = 0;
            let salesBySeller = {};
            
            todaySales.forEach(sale => {
                totalGallons += sale.quantity;
                totalRevenue += sale.totalPrice;
                
                if (!salesBySeller[sale.seller]) {
                    salesBySeller[sale.seller] = {
                        count: 0,
                        amount: 0
                    };
                }
                
                salesBySeller[sale.seller].count++;
                salesBySeller[sale.seller].amount += sale.totalPrice;
            });
            
            // En una implementación real, este reporte se imprimiría
            // o se guardaría en una base de datos
            console.log('=== REPORTE DE CIERRE DE TURNO ===');
            console.log(`Fecha: ${formattedDate}`);
            console.log(`Total de ventas: ${totalSales}`);
            console.log(`Total de galones: ${totalGallons.toFixed(2)}`);
            console.log(`Total en caja: $${totalRevenue.toLocaleString()}`);
            console.log('Ventas por vendedor:');
            
            for (const seller in salesBySeller) {
                console.log(`- ${seller}: ${salesBySeller[seller].count} ventas, $${salesBySeller[seller].amount.toLocaleString()}`);
            }
        }
        
        // Inicializar valores predeterminados cuando se selecciona un tipo de combustible
        document.getElementById('fuelType').addEventListener('change', function() {
            const fuelType = this.value;
            let defaultPrice = 0;
            
            switch(fuelType) {
                case 'ACPM':
                    defaultPrice = 8700;
                    break;
                case 'Gasolina Corriente':
                    defaultPrice = 9200;
                    break;
                case 'Gasolina Extra':
                    defaultPrice = 12000;
                    break;
            }
            
            document.getElementById('unitPrice').value = defaultPrice;
            calculateTotal();
        });
    </script>
</body>
</html>